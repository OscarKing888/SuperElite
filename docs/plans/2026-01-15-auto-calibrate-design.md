# Auto-Calibrate 自动阈值校准功能设计

**日期**: 2026-01-15  
**状态**: 待实现

## 概述

添加 `--auto-calibrate` 参数，让用户可以基于自己照片集的分数分布，自动计算最适合的星级阈值，而非使用硬编码的默认值。

## 核心设计

### 分布策略

采用 **20% 均分** 策略，将照片平均分配到 5 个星级：

| 星级 | 百分位区间 | 说明 |
|:----:|:----------:|------|
| 4★ | P80-P100 | 最优 20% |
| 3★ | P60-P80  | 良好 20% |
| 2★ | P40-P60  | 中等 20% |
| 1★ | P20-P40  | 较差 20% |
| 0★ | P0-P20   | 最差 20% |

### 数据流

```
1. 评分所有图片 → 收集分数，缓存结果（不写入）
2. 计算 20% 百分位阈值 (P80, P60, P40, P20)
3. 用户确认:
   [Y] 使用建议阈值
   [N] 使用默认阈值 (78,72,66,58)
   [C] 逐个自定义调整
4. 应用最终阈值，批量写入 XMP
```

### 用户交互

```
📊 分数分布分析:
   最高分: 89.2  |  最低分: 42.1  |  平均: 68.5

📐 根据 20% 均分，建议阈值:
   4★ ≥ 79 (100张)  |  3★ ≥ 72 (100张)
   2★ ≥ 65 (100张)  |  1★ ≥ 56 (100张)
   0★ < 56 (100张)

是否使用此阈值？ [Y/N/C]: C

调整 4★ 阈值 [回车保持 79]: 80
调整 3★ 阈值 [回车保持 72]: 
调整 2★ 阈值 [回车保持 65]: 
调整 1★ 阈值 [回车保持 56]: 

✅ 使用阈值: 80, 72, 65, 56
```

## CLI 参数

```
--auto-calibrate    启用自动校准模式（基于照片分布计算阈值）
```

与现有参数兼容：
- `--write-xmp` 配合使用写入元数据
- `--organize --output` 配合使用分目录
- `--csv` 配合使用导出报告
